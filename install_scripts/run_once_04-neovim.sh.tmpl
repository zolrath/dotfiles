#!/bin/sh

. $HOME/.local/share/chezmoi/helpers

echo ''

if ! [ -x "$(command -v bob)" ]; then
    info 'ðŸ’» Installing asdf neovim'
    asdf plugin add neovim
    asdf global neovim stable
    success 'asdf neovim'
else
    skip 'asdf neovim'
fi
bob use stable

if ! [ -x "$(command -v beautysh)" ]; then
    info 'ðŸ’» Installing beautysh'
    pip3 install beautysh
    asdf reshim python
    success 'beautysh'
else
    skip 'beautysh'
fi

if ! [ -x "$(command -v autopep8)" ]; then
    info 'ðŸ’» Installing autopep8'
    pip3 install autopep8
    asdf reshim python
    success 'autopep8'
else
    skip 'autopep8'
fi

if ! [ -x "$(command -v stylua)" ]; then
    info 'ðŸ’» Installing stylua'
    cargo install stylua
    asdf reshim rust
    success 'stylua'
else
    skip 'stylua'
fi

if ! [ -x "$(command -v shellcheck)" ]; then
    info 'ðŸ’» Installing shellcheck'
    {{ if eq .chezmoi.os "darwin" -}}
    brew install shellcheck
    {{ else if eq .chezmoi.os "linux" -}}
    sudo apt install shellcheck
    {{ end -}}

    success 'shellcheck'
else
    skip 'shellcheck'
fi

if ! [ -x "$(command -v rustywind)" ]; then
    info 'ðŸ’» Installing rustywind'
    npm install -g rustywind
    asdf reshim nodejs
else
    skip 'rustywind'
fi


info 'ðŸ’» Installing neovim packages'
nvim --headless -c "call firenvim#install(0, 'export PATH=\"$PATH\"')" -c quit
success 'neovim packages'

echo ''
